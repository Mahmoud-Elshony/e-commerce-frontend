<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Product</title>
</head>

<body>
    <!-- ----------------------------------- Start Navbar ----------------------------------------- -->
    <header>
        <div id="ads">
            <label class="label">
                Summer Sale For All Swim Suits And Free Express Delivery - OFF 50%!
                <span id="ads-span">ShopNow</span>
            </label>
        </div>
        <nav class="container">
            <h2 id="logo"><span>Ex</span>clusive</h2>
            <ul id="nav-list">
                <li class="nav-link"><a href="">Home</a><i class="fa-solid fa-house"></i></li>
                <li class="nav-link"><a href="">Contact</a><i class="fa-solid fa-paper-plane"></i> </li>
                <li class="nav-link"><a href="">Shop</a> <i class="fa-solid fa-shop"></i> </li>
                <li id="sign-up" class="nav-link"><a href="">Sign Up</a><i class="fa-solid fa-right-to-bracket"></i>
                </li>
            </ul>
            <div id="header-icons">
                <div id="search-div">
                    <input type="search" name="search" id="search" placeholder="Find Your Product" />
                    <i class="fas fa-search"></i>
                </div>
                <i class="fa-regular fa-heart"></i>
                <i onclick='window.open("/cart.html", "_self")' class="fa-solid fa-cart-shopping"></i>
            </div>
        </nav>
    </header>
    <!-- <button class="btn-orange">Test button</button> -->
    <!-- ----------------------------------- End Navbar ------------------------------------------- -->

    <!-- ----------------------------------- Start Product Section ----------------------------------- -->
    <section id="product" class="container">
        <div id="images-product-container"></div>
        <div id="product-content-container">
            <div id="main-product-content"></div>
            <div id="data-product-content"></div>
        </div>
    </section>
    <!-- ----------------------------------- End Product Section ------------------------------------- -->

    <!-- ----------------------------------- Start Sale Section ----------------------------------- -->
    <section id="sale-container" class="section-margin container">
        <h3 class="section-headers">Related Item</h3>
        <div id="sec-sale"></div>
    </section>
    <!-- ----------------------------------- End Sale Section ------------------------------------- -->

    <!-- ----------------------------------- Start Footer ----------------------------------------- -->
    <footer>
        <div class="container" id="footer-content">
            <div id="subscribe">
                <h2 style="color: var(--white);" id="logo"><span>Ex</span>clusive</h2>
                <h5>Subscribe</h5>
                <span>Get 10% off your first order</span>
                <div style="max-width:200px; margin-top: 1rem;" id="search-div">
                    <input style="max-width:80%" type="search" name="search" id="search" placeholder="subscribe" />
                    <i style="color: var(--black);" class="fa-regular fa-paper-plane"></i>
                </div>
            </div>

            <div id="support">
                <h4>Support</h4>
                <ul id="support-list">
                    <li class="support-info">
                        111 Bijoy sarani, Dhaka, DH 1515, Bangladesh.
                    </li>

                    <li class="support-info">exclusive@gmail.com</li>
                    <li class="support-info">+88015-88888-9999</li>
                </ul>
            </div>

            <div id="account">
                <h4>Account</h4>
                <ul id="account-list">
                    <li class="account-link"> <a href="">My Account</a></li>
                    <li class="account-link"> <a href="">Login / Register</a></li>
                    <li class="account-link"> <a href="">Cart</a></li>
                    <li class="account-link"> <a href="">Wishlist</a></li>
                    <li class="account-link"> <a href="">Shop</a></li>
                </ul>
            </div>

            <div id="quik-link">
                <h4>Quik Link</h4>
                <ul id="quik-link-list">
                    <li class="quik-link-item"> <a href="">Privacy Policy</a></li>
                    <li class="quik-link-item"> <a href="">Terms Of Use</a></li>
                    <li class="quik-link-item"> <a href="">FAQ</a></li>
                    <li class="quik-link-item"> <a href="">Contact</a></li>
                </ul>
            </div>

            <div id="download">
                <h4>Download App</h4>
                <p>Save $3 with App New User Only</p>
                <ul id="social-links">
                    <li class="social-icon"><a href=""><i class="fa-brands fa-facebook"></i></a></li>
                    <li class="social-icon"><a href=""><i class="fa-brands fa-twitter"></i></a></li>
                    <li class="social-icon"><a href=""><i class="fa-brands fa-square-instagram"></i></a></li>
                    <li class="social-icon"><a href=""><i class="fa-brands fa-linkedin"></i></a></li>
                </ul>
            </div>
        </div>
        <div id="copy-right">
            <p>&copy; 2023 Exclusive All Rights Reserved</p>
        </div>
    </footer>
    <!-- ----------------------------------- End Footer ------------------------------------------- -->

    <script>
        // ////////////////////////////////// Get Product //////////////////////////////// //
        let defaultQuantity = 0;

        function getCookie(param) {
            let cookieArr = document.cookie.split(';');
            for (let i = 0; i < cookieArr.length; i++) {
                let cookiePair = cookieArr[i].split('=');
                if (param === cookiePair[0].trim()) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            return null;
        }

        let product = JSON.parse(getCookie('product'));

        // ////////////////////////////////// Style Product //////////////////////////////// //
        const imagesProduct = document.getElementById("images-product-container");
        const mainProductContent = document.getElementById("main-product-content");

        // Images Product //
        const productImages = product.image_keys.slice(0, 4);
        const productImgsDiv = document.createElement("div");
        productImgsDiv.id = "product-imgs-div"
        imagesProduct.appendChild(productImgsDiv)

        productImages.forEach((ele) => {
            const productImgs = document.createElement("img");
            productImgs.className = "product-imgs";
            productImgs.src = ele;
            productImgsDiv.appendChild(productImgs);
        });


        const mainProductImage = document.createElement("img");
        mainProductImage.id = "main-product-img";
        mainProductImage.src = product.image_key;
        imagesProduct.appendChild(mainProductImage);

        imagesProduct.appendChild(mainProductImage);


        // Create Content //
        const productTitle = document.createElement("h3");
        productTitle.id = "product-title";
        const words = product.name.trim().split(/\s+/);
        const truncatedText = words.slice(0, 4).join(" ");

        productTitle.style.textTransform = "capitalize";
        productTitle.textContent = truncatedText;

        mainProductContent.appendChild(productTitle);

        // Rating Logic //
        const ratingContainer = document.createElement("div");
        ratingContainer.id = "stars-div";
        ratingContainer.innerHTML = `
                        <i class="rate stars fa-solid fa-star"></i>
                        <i class="rate stars fa-solid fa-star"></i>
                        <i class="rate stars fa-solid fa-star"></i>
                        <i class="rate stars fa-solid fa-star"></i>
                        <i class="rate stars fa-solid fa-star"></i>
                        `
        mainProductContent.appendChild(ratingContainer);
        ratingContainer.style.margin = "0.5rem 0";

        const getStars = ratingContainer.querySelectorAll(".rate");
        const stars = Math.round(product.product_rating?.value);
        getStars.forEach((ele, index) => {
            if (index < stars) {
                ele.classList.add("stars-filled");
                ele.classList.remove("stars");
            } else {
                ele.classList.add("stars");
                ele.classList.remove("stars-filled");
            }
        });

        const priceSpan = document.createElement("span");
        priceSpan.className = "product-price";
        mainProductContent.appendChild(priceSpan);
        priceSpan.innerText = product.price + " $";

        const description = document.createElement("p");
        description.className = "product-description";
        mainProductContent.appendChild(description);
        description.innerText = product.name;

        // Second Product Section //
        const dataProductContent = document.getElementById("data-product-content");

        const brand = document.createElement("h4");
        brand.innerHTML = "Brand: " + product.brand_code;
        dataProductContent.appendChild(brand);

        const avilable = document.createElement("h5");
        avilable.innerHTML = "In Stock";
        avilable.style.color = "var(--break-color)"
        dataProductContent.appendChild(avilable);

        const productInfo = document.createElement("div");
        productInfo.className ="product-info"

        for (const key in product.plp_specifications) {
            if (product.plp_specifications.hasOwnProperty(key)) {
                const productInfoSpan = document.createElement("span");
                const value = product.plp_specifications[key];
                productInfoSpan.innerHTML = value;
                productInfo.appendChild(productInfoSpan);
            }
        }

        dataProductContent.appendChild(productInfo)

        const dataDiv = document.createElement("div");
        dataDiv.className = "data-div";
        dataProductContent.appendChild(dataDiv);

        const quantityDiv = document.createElement("div");
        quantityDiv.className = "quantity-div";
        dataDiv.appendChild(quantityDiv);

        const decreasingBtn = document.createElement("button");
        decreasingBtn.className = "decreasing-btn";
        decreasingBtn.innerHTML = "-";
        decreasingBtn.addEventListener("click", decreasing);
        quantityDiv.appendChild(decreasingBtn);

        const quantitySpan = document.createElement("span");
        quantitySpan.className = "current-quantity";
        quantitySpan.innerHTML = defaultQuantity;
        quantityDiv.appendChild(quantitySpan);

        const increasingBtn = document.createElement("button");
        increasingBtn.className = "increasing-btn";
        increasingBtn.innerHTML = "+";
        increasingBtn.addEventListener("click", increasing);
        quantityDiv.appendChild(increasingBtn);

        const buyBtn = document.createElement("button");
        buyBtn.className = "buy-btn";
        buyBtn.innerText = "Buy Now";
        buyBtn.classList.add("btn-orange");
        buyBtn.addEventListener("click", ()=>{
            window.open("/cart.html", "_self");
        });
        dataDiv.appendChild(buyBtn);

        const faveIcon = document.createElement("i");
        faveIcon.className = "heart-icon fa-regular fa-heart";
        dataDiv.appendChild(faveIcon);

        const productRoles = document.createElement("div");
        productRoles.innerHTML = `
            <div id="delvery-div">
                <i class="fa-solid fa-truck-fast"></i>
                <div id="delivery-info">
                    <h5>Free Delivery</h5>
                    <p>Enter your postal code for Delivery Availability</p>
                </div>
            </div>
            <div id="return-div">
                <i class="fa-solid fa-rotate-left"></i>
                <div id="return-info">
                    <h5>Return Delivery</h5>
                    <p>Free 30 Days Delivery Returns. Details</p>
                </div>
            </div>
        `

        dataProductContent.appendChild(productRoles);

        // ////////////////////////////////////////// Card Functions /////////////////////////////////////// //

        function decreasing(){
            if(defaultQuantity > 0){
                defaultQuantity--;
                quantitySpan.innerHTML = defaultQuantity;
            }
        }

        function increasing(){
                defaultQuantity++;
                quantitySpan.innerHTML = defaultQuantity;
        }

    </script>
    <script src="./js/index.js"></script>
</body>

</html>